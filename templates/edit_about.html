{% extends "base.html" %}

{% block title %}소개 수정{% endblock %}

{% block content %}
  <h2>✏️ 소개글 수정</h2>

  <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css">
  <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>

  <form method="POST" onsubmit="return saveIntro()">
    <div id="editor"></div>
    <textarea name="content" id="content" style="display:none;"></textarea>
    <br><button type="submit">저장</button>
  </form>
  <p><a href="/about">← 소개 페이지로</a></p>

  <script>
    const editor = new toastui.Editor({
      el: document.querySelector('#editor'),
      height: '400px',
      initialEditType: 'markdown',
      previewStyle: 'vertical',
      initialValue: `{{ content | replace("\r", "") | escape }}`
    });

    function saveIntro() {
      document.querySelector('#content').value = editor.getMarkdown();
      return true;
    }
  </script>
{% endblock %}
