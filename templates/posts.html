{% extends "base.html" %}

{% block title %}ê¸€ ëª©ë¡{% endblock %}

{% block content %}
  <h2>ğŸ“š ê¸€ ëª©ë¡</h2>

  <form method="GET" action="/posts" style="display: flex; gap: 8px; align-items: center; margin-bottom: 16px;">
    <input type="text" name="q" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
           value="{{ request.args.get('q', '') }}" class="search-input">
    <button type="submit">ê²€ìƒ‰</button>
  </form>

  {% if 'user' in session %}
    <p><a href="/create">âœï¸ ìƒˆ ê¸€ ì‘ì„±í•˜ê¸°</a></p>
  {% endif %}

  <ul>
    {% if posts %}
      {% for post in posts %}
        <li>
          <a href="/posts/{{ loop.index0 }}">
            {{ highlight_keyword(post.title, request.args.get('q', '')) }}
          </a>
          <span style="color: gray; font-size: 0.9em;"> ({{ post.date }})</span>

          {% if 'user' in session %}
            <form action="/delete/{{ loop.index0 }}" method="POST" style="display:inline;" onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
              <button type="submit">ì‚­ì œ</button>
            </form>
            <a href="/edit/{{ loop.index0 }}" style="margin-left: 8px;">âœï¸ ìˆ˜ì •</a>
          {% endif %}
        </li>
      {% endfor %}
    {% else %}
      <p style="color: gray;">â— ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </ul>
{% endblock %}
